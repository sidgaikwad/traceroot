# Python SDK for TraceRoot

## Introduction

The [TraceRoot Python SDK](https://pypi.org/project/traceroot) is a lightweight wrapper around OpenTelemetry, optimized for ease of use.

## Installation

```bash
pip install traceroot
```

## Environment Setup

Create a [TraceRoot token](https://test.traceroot.ai/integrate) from the dashboard.

### Recommended: Use environment variables directly

Set the required variables in your shell or deployment environment:

```bash
export TRACEROOT_TOKEN="traceroot-430246"
export TRACEROOT_SERVICE_NAME="traceroot"
export TRACEROOT_GITHUB_OWNER="github_owner"
export TRACEROOT_GITHUB_REPO_NAME="github_repo_name"
export TRACEROOT_GITHUB_COMMIT_HASH="main"
export TRACEROOT_ENABLE_SPAN_CLOUD_EXPORT=true
export TRACEROOT_ENABLE_LOG_CLOUD_EXPORT=true
export TRACEROOT_ENABLE_SPAN_CONSOLE_EXPORT=false
export TRACEROOT_ENABLE_LOG_CONSOLE_EXPORT=true
```

### Optional: Using a `.env` file

If you prefer to keep variables in a `.env` file for local development, you must **load it manually** in Python (the SDK does not auto-load `.env`):

```bash .env
TRACEROOT_TOKEN=traceroot-430246
TRACEROOT_SERVICE_NAME=traceroot
TRACEROOT_GITHUB_OWNER=github_owner
TRACEROOT_GITHUB_REPO_NAME=github_repo_name
TRACEROOT_GITHUB_COMMIT_HASH=main
TRACEROOT_ENABLE_SPAN_CLOUD_EXPORT=true
TRACEROOT_ENABLE_LOG_CLOUD_EXPORT=true
TRACEROOT_ENABLE_SPAN_CONSOLE_EXPORT=false
TRACEROOT_ENABLE_LOG_CONSOLE_EXPORT=true
```

Then load it in your code:

```python
from dotenv import load_dotenv
import os
import traceroot

load_dotenv()  # load variables from .env into os.environ

logger = traceroot.get_logger()
```

> ⚠️ Note: Just creating a `.env` file is not enough—you need to explicitly call `load_dotenv()` or set variables in your shell.

---

## Examples

Uses `@traceroot.trace()` for traces and TraceRoot logger similar to the default Python logger.

If you specify the `name` parameter in the decorator, it will be used as the span name shown in the TraceRoot.AI platform.

```python
import traceroot
import asyncio

logger = traceroot.get_logger()

@traceroot.trace(name="greet")
async def greet(name: str) -> str:
    logger.info(f"Greeting inside traced function: {name}")
    # Simulate some async work
    await asyncio.sleep(0.1)
    return f"Hello, {name}!"

async def main():
    result = await greet("world")
    logger.info(f"Greeting result: {result}")

if __name__ == "__main__":
    asyncio.run(main())
```

## Development Installation

If you want to contribute or use the latest features, install from source:

```bash
git clone https://github.com/traceroot-ai/traceroot-sdk.git
cd traceroot
pip install -e .
```
